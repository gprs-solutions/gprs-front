name: ğŸš€ Deployment

description: Upload files to FTP server

inputs:
  ftp-server:
    description: 'The FTP server URL'
    required: true
  ftp-user:
    description: 'The FTP username'
    required: true
  ftp-password:
    description: 'The FTP password'
    required: true

runs:
  using: 'composite'
  steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4

    - name: ğŸ“¦ Download build artifacts
      uses: actions/download-artifact@v4
      with:
        name: app-build
        path: ./app-build/
    
    - name: ğŸ“ Move configuration file to app folder
      shell: bash
      run: mv ./.htaccess ./app-build/
    
    - name: ğŸ”„ Sync code with server
      uses: SamKirkland/FTP-Deploy-Action@v4.3.5
      with:
        server: ${{ inputs.ftp-server }}
        username: ${{ inputs.ftp-user }}
        password: ${{ inputs.ftp-password }}
        local-dir: ./app-build/